using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;

/* |+| /_______ ___________ ______ _ ________________________ _ _____ ___   _____ _____  _______________  ______ _\ |-| */

/*
_____________________________________________________________________________
|                                       _.._._								|
|                                  .,c="""  _JLccccc,						|
|                              ,r="     ,,-'         "=c					|
|                           ,J"    ,c$?$ $ `$c          `=,					|
|                        ,c"'  ,J"" J ( j'   "$.           "c,				|
|?????????????""""""???"=hcJ$"    JL   `r    `$r             "$q			|
|`.`.`.`.`.`.`.`.`.`.`.`.`J"     j'L   `L   \  ?c               "g			|
|`.`.`.`.`.`.`.`.`.`.`.`.J      j'`?c   ?.   t  `$.               `=hc,;c???|
|`.`.`.`.`.`.`.`.`.`.`_,$      z'.`.?L   $   `h   "=c,      ,cJ????""`.`.`.`|
|`.`.`.`.`.`,cPP?"""'? J    ;,?.`z$$h`"$.'L3, `L  $    "" $`.`.`.`.`.`.`.`.`|
|`.`.`.,c??"        ,f $   / $.`.,,,`"=`?h`?$c    `r 3r  .$`.`.`.`.`.`.`.`.`|
|"hcr="             j  F  j  P.`$$$h3$,`.`???$c    `cc$r.P.`.`.`.`.`.`.,r`.`|
|`.$                ( J  d$ j'.`?.$$$$`.`.,`.`="$c.,cP"" $.`.$??"??$hc$".`.`|
|`.`h               ( $  $$ $`.`.`.""""`.J:`hJ?$h,`.$   JF.`$"      .$.`.`.`|
|`.`.?.             `j' ($$ $`.`.`.`.`.`f.`?$$$$$$r'3  J"`.J" \    .P`.`.`.`|
|`.`.`?.             $  ($' $`.`.`.`.;`.`.`.`"?$??"`$ .F',$F   L  .P.`.`.`.`|
|`.`.`.?.           j'  ($' $`.`.`.`"=cj'.`.`.`.`.`,P $'$l?F   $ j'`.`.`.`.`|
|`.`.`.`?,          `$.  ? '$`.`.`.`.`.`.`.`.`.`.`,$  $$j'j'   $z?.`.`.`.`.`|
|`.`.`.`.?,         ( $    j'`.`.J$I?$c,.`.`.`.`.J$F  $cJ      3F`.`.`.`.`.`|
|`.`.`.`.``h          j'   $h`.`.?6$cI$9;`.`.`.c$$" .$" L    .P".`.`.`.`.`.`|
|`.`.`.`.`.`?.        $   J$?,.`.`.??i???`.`.`.`$F.P$$  ?   J?.`.`.`.`.`.`,P|
|`.`.`.`.`.`."h.      $  J$$.?.`.`.`.`.`.`.`.`,$$,c'`$   L,P.`.`.`.`.`.`.,F	|
|h.`.`.`.`.`.`.?h    J  J3$$.`3`.`.`.`.`.`.`.J$$"$   $   J"`.`.`.`.`.`.`,P	|
|`h`.`.`.`.`.`.`.?h .F J'<$F.`.?h_.`.`.`.,c$$$$$ $  ,P J?`.`.`.`.`.`.`.,P	|
|  $.`.`.`.`.`.`.`.?$ J' <$`.`.`.`?=hc=?"'J$$$$" $  $.P`.`.`.`.`.`.`.`,P	|
|   $`.`.`.`.`.`.`.`f $  <$`.`.`.`.`.`.`.;$$$$   F  $?.`.`.`.`.`.`.`.,F		|
|    ?.`.`.`.`.`.`.(f $. j'`.`.`.`.`.`.`.$$$P   JF JF`.`.`.`.`.`.`.`,F		|
|     ",.`.`.`.`.`.`$'F  J)`.`.`.`.`.`.`J$P    Jl$$?.`.`.`.`.`.`.`.,F;		|
|      "i`.`.`.`.`.`? $ ($.`.`.`.`.`.`.z$"    J$"J"`.`.`.`.`.`.`.`,P }     j|
|       ?`.`.`.`.`.`.?`  P.`h`.,c`.`.`J" ,' z$"'J".`.`.`.`.`.`.`.,P j      f|
|        ?.`.`.`.`.`.`h  F.`$'z?.`.`,",$" zP"`.`?`.`.`.`.`.`.`.`,P ,      j'|
|         ?`.`.`.`.`.`.??'.<$$.`.`.J$"j'c$.`.`.`.`.`.`.`.`.`.`.j'  $     j .|
|          $.`.`.`.`.`.`.`.$?`.`.`.`.,$?.`.`.`.`.`.`.`.`.`.`.`JF  .F    J"L	|
|           $`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.J$   $   .P   k|
|           `h,c.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.,$$$   `h  P		|
|           ,P"`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`,$"$$    $ $		|
|         ,P.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.;$F $$r    ?c,  _c"|
|       ,P"`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`;$'F  $$       ""	|
|     .$"`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.,P  $  `$$			|
|    J?`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`,$   $     "=,_		|
|  ,P`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`$$   ?         "=cccc"|
|,$"h`.`.`.`.`.`.`.`.`.`.,cc,`.`.`.`.`.`.`.`.`.`.`.`.JP$.  `t     -c   3,	|
|$`.3`.`.`.`.`.`.`.;.`.`$,c,3`.`.`.`.`.`.;;`.`.`.`.`;$ `L   $       3.  ?.	|
|$$iJ`.`.`.`.`.`.`;;.`.`$?;t$).`.`.`.`.`;;;`.`.`.`.,$'  $   `L       $   $	|
|?$F;`.`.`.`.`.`.`;;.`.``$iP"`.`.`.`.`.`;;:`.`.`.`.$$   $    3.      $   3	|
|`h;;,.`.`.`.`.`.`?;;`.`.`.`.`.`.`.`.`.;;3.`.`.`.`,$$  j'L    $     J"   $	|
| ?;;;;,.`.`.`;;.`$;;;.`.`.`.`.`.`.`.`;;;P.`.`.`.`$$F  j ?.    `"??"    v'	|
| `h;;;;;;,;;;;).`?h;;,`.`.`.`.`.`.`;;;;$`.`.`.`.f'$F  J  ?,         .$"	|
|   ?c;;;;;;;;F`.`.$h;;;,`.`.`.`.,;;;;;$'`.`.`.`f  $)  $   `"?????c=" 4r	|
|    ?c;;;;;;F.`.`.`?y;;;;;;;,;;;;;;;iP`.`.`.`.J'  $   $              j'	|
|     `"?jj$F;.`.`.`.`$y;;;;;;;;;;;jP".`.`.`.`;$   $   F              j'	|
|          3;;.`.`.`.`.`?hijjjjid$?".`.`.`.`.,f    $   F              j'	|
|           h;.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`,;$'  ;F   L              P		|
|           ?h.`.`.`.`.`.`.`.`.`.`.`.`.`.`.,;;$   $    ? ,cc         $		|
|           `$;`.`.`.`.`.`.`.`.`.`.`.`.`.`,;;;$   $     "   ?.     z"		|
|            ?;`.`.`.`.`.`.`.`.`.`.`.`.`.;;;;;$   `r         h.,zJ"			|
|             h;.`.`.`.`.`.`.`.`.`.`.`.`;;;;;;$    ?        `$				|
|             `h;;;,.`.`.`.`.`.`.`.`.`.`;;;;;;$     $       .F				|
|              $;;;;;;.`.`.`.`.`.`.`.`.,;;;;;;$      "hcc$  $				|
|              `h;;;;;,`.`.`.`.`.`.`.`.;;;;;;;$.           j'				|
|               ?;;;;;;;.`.`.`.`.`.`.`.;;;;;;;9L,         J'				|
|                ?;;;;;;;`.`.`.`.`.`.`.;;;;;;;;h "cc,__,c"					|
|                 $;';;;;,.`.`.`.`.`.`.;;;;;;';9r							|
|                  $;`.`.`.`.`.`.`.`.`.;;`.`;`.`?c.							|
|                   $;.`.`.`.`.`.`.`.`.;.`.`.`.`.`."c._						|
|                    h;`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`."?c,					|
|                    ?;;.?;`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`."=c_				|
|                     $;.`$h.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`."c			|
|                     ?;;`.$)`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`."h.		|
|                      h;`.`?`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`?.		|
|                      `C;;`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.?c		|
|                       $;;,.`.`.`.`.`.`.`;;.`.`.`.`.`.`.`.`.`.`.`.`.`.h	|
|                       ?;;;;`.`.`.`.`.`.;;;;`.`.`.`.`.`.`.`.`.`.`.`.`.`h	|
|                        h.;;;;`.`.`.`.`.;;;;';`.`.`.`.`.`.`.`.`.`.`.`.`?L	|
|                        ?.`;;;;.`.`.`.`.`;;;;;`.`.`.`.`.`.`.`.`.`.`.`.`.3.	|
|                         ?`.;;;;`.`.`.`.`.;;;;`.`.`.`.`.`.`.`.`.`.`.`.`.`$	|
|                          $`.;;;;,`.`.`.`.`.;$`.`.`.`.`.`.`.`.`.`.`.`.`.``L|
|                           $`.`;;;;.`.`.`.`.;$`.`.`.`.`.`.`.`.`.`.`.`.`.`.$|
|                            $;`.;;;;;.`.`.`.;9`.`.`.`.`.`.`.`.`.`.`.`.`.`.3|
|                             $;,`.`;;.`.`.`.;?`.`.`.`.`.`.`.`.`.`.`.`.`.`.3|
|                              $h;;`.`.`.`.`.;;L.`.`.`.`.`.`.`.`.`.`.`.`.`.3|
|                              $'"$;;;;;;;;;;;j$.`.`.`.`.`.`.`.`.`.`.`.`.`.$|
|                              $.```?;;;;;;jjJ?$.`.`.`.`.`.`.`.`.`.`.`.`.`.$|
|                             J'`.`.`"hiii?";;;?h`.`.`.`.`.`.`.`.`.`.`.`.`.$|
|                           ,$`.`.`.`.``?i;;;;;;$`.`.`.`.`.`.`.`.`.`.`.`.`j'|
|                          c"`.`.`.`.`.`.?$i;;;;$`.`.`.`.`.`.`.`.`.`.`.`.`$	|
|                        .P`.`.`.`.`.`.`.`.`?iii9`.`.`.`.`.`.`.`.`.`.`.`.`f	|
|                       z?.`.`.`.`.`.`.`.`.`.`.`3).`.`.`.`.`.`.`.`.`.`.`.j'	|
|                      J'`.`.`.`.`.`.`.`.`.`.`.`?).`.`.`.`.`.`.`.`.`.`.`.3	|
|                    j"`.`.`.`.`.`.`.`.`.`.`.`.`.h.`.`.`.`.`.`.`.`.`.`.`.3	|
|                  ,P`.`.`.`.`.`.`.`.`.`.`.`.`.`.$.`.`.`.`.`.`.`.`.`.`.`.3  |              '                                                 '                      
_____________________________________________________________________________ */



/*/_______ ___________ ______ _ ________________________ _ ________ _____  _\		*/

/*.                                                    .								_____________________________
    .$"                                    $o.      $o.  _o"							|		   Knâkles			|
   .o$$o.    .o$o.    .o$o.    .o$o.   .o$$$$$  .o$$$$$ $$P `4$$$$P'   .o$o.			|							|
  .$$| $$$  $$' $$$  $$' $$$  $$' $$$ $$$| $$$ $$$| $$$ ($o $$$: $$$  $$' $$$			|	 |$|  Game File  |$|    |
  """  """ """  """ """  """ """  """ """  """ """  """  "  """  """ """  """			|							|
.oOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOo.			|							|
  ooo_ ooo ooo. ... ooo. ... ooo.  .. `4ooo.  .`4ooo.   ooo.ooo. ooo ooo.  ..			|							|
  $$$"$$$$ $$$| ... $$$| ... $$$$$$ ..    "$$o     "$$o $$$|$$$| $$$ $$$|   .			|							|
  $$$| $$$ $$$|     $$$|     $$$|     $$$: $$$ $$$: $$$ $$$|$$$| $$$ $$$|				|							|
  $$$| $$$ $$$| $o. $$$| $o. $$$| $o. $$$| $$$ $$$| $$$ $$$|$$$| $$$ $$$| $.			|							|
  $$$| $$$ $$$| $$$ $$$| $$$ $$$| $$$ $$$| $$$ $$$| $$$ $$$|$$$| $$$ $$$| $o.			|							|
  $$$| $$$ $$$| $$$ $$$| $$$ $$$| $$$ $$$| $$$ $$$| $$$ $$$|$$$| $$$ $$$| $$$			|							|
  $$$| $$$  $$. $$$  $$. $$$  $$. $$$ $$$| $$$ $$$| $$$ $$$|$$$| $$$  $$. $$$			|	  						|
  $$$: $P'  `4$$$Ü'__`4$$$Ü'  `4$$$Ü' $$$$$P'  $$$$$P'  $$$|$$$: $P' __`4$$$Ü'			| 	  24.04 | Since 2019	|
 _ _______/∖______/  ∖______/∖______________/|________ "$P' _______/  ∖_____ _			|___________________________|
                                                        i"  	Knâkles
                                                        |
/* /_______ ___________ ______ _ ________________________ _ ________ _____  _\	*/

/*				     		   __________ ____  ______ _ _ ___ __ __ _                          */

/*				         	 |$|		Knâkles [Conviction]		|$|							*/

/* |+| /_______ ___________ ______ _ ________________________ _ _____ ___   _____ _____  _______________  ______ _\ |-| */

namespace ConvictionRPG {

    class Game {

/* |+| /_______ ___________ ______ _ ________________________ _ _____ ___   _____ _____  _______________  ______ _\ |-| */

        /*				     		   __________ ____  ______ _ _ ___ __ __ _                          */

        /*				         	         |$|   Configuration    |$|		                            */

        List<Character> characters = new List<Character>();

        public static string newLine = "\n";

/* |+| /_______ ___________ ______ _ ________________________ _ _____ ___   _____ _____  _______________  ______ _\ |-| */

        private int choice;
        public bool playing { get; set; } = true;
        public string fileName { get; set; } = "characters.txt";
        public int activeCharacter;
        public bool end { get; set; } = false;

/* |+| /_______ ___________ ______ _ ________________________ _ _____ ___   _____ _____  _______________  ______ _\ |-| */

        #region Init Game

        public void initGame() {

            if (File.Exists("characters.txt")) {

                //This line will change to "loadCharacters();".

                System.Console.WriteLine("The file exists.");

                System.Console.ReadKey();

            } else {

                //This line will change to "createNewCharacter();".

                System.Console.WriteLine("File does not exist in the current directory!");

                System.Console.ReadKey();
            }
        }

        #endregion

        #region Get Playing

        public bool getPlaying()
        {
            return this.playing;
        }

        #endregion

/* |+| /_______ ___________ ______ _ ________________________ _ _____ ___   _____ _____  _______________  ______ _\ |-| */

        #region Create New Character

        public void createNewCharacter()
        {
            Console.Write("Enter character name: ");
            string name = Console.ReadLine();

            for (int i = 0; i < characters.Count; i++)
            {
                if (name == characters[i].name)
                {
                    i = -1;
                    Console.Write("Error! Character already exists!");
                    Console.Write("\nEnter character name: ");
                    name = Console.ReadLine();
                }
            }

            characters.Add(new Character());
            activeCharacter = characters.Count - 1;
            characters[activeCharacter].initialize(name);
        }

        #endregion

        #region Save Character

        public void saveCharacters()
        {
            using (StreamWriter writetext = new StreamWriter(fileName))
            {
                for (int i = 0; i < characters.Count; i++)
                {
                    writetext.WriteLine($"3 {characters[i].getAsString()}");
                    if (characters[i].getInvAsStringSave() != "")
                    {
                        writetext.WriteLine($"{characters[i].getInvAsStringSave()}");
                    }
                }
            }
        }

        #endregion

        #region Select Character

        public void selectCharacter()
        {
            Console.WriteLine("\nSelect character: ");

            for (int i = 0; i < characters.Count; i++)
            {
                Console.WriteLine($"Index: {i} = {characters[i].name} Level: {characters[i].level}");
            }

            do
            {
                Console.Write("\nYour choice: ");
                string strchoice = Console.ReadLine();
                bool success = Int32.TryParse(strchoice, out choice);
                if (success && Enumerable.Range(0, characters.Count).Contains(choice))
                    break;
                else
                    Console.Write($"\nFault input. Please enter new choice (0-{characters.Count}): ");
            }
            while (true);

            activeCharacter = choice;

            Console.WriteLine($"{characters[activeCharacter].name} was selected!");
        }

        #endregion

/* |+| /_______ ___________ ______ _ ________________________ _ _____ ___   _____ _____  _______________  ______ _\ |-| */

    }
}
